Codebook
- 설문·데이터세트의 변수명과 이에 대응되는 질문 내용, 응답 선택지, 코드값을 정리한 문서
- 설문조사·통계조사에서 가장 흔히 쓰이는 명칭
- 분석 시 "이 변수의 1은 무슨 의미인가?"를 확인하는 용도

Data Dictionary
- 데이터베이스나 분석환경에서 필드명, 타입, 단위, 값 범위, 라벨 등을 정의한 메타데이터 사전
- 설문 뿐 아니라 모든 데이터 구조 문서에 사용
- JSON, Excel, DB 테이블 등 다양한 형식 가능

### 문자 인코딩
- 문제: 코드북, 데이터에 한국어 텍스트 포함. 액셀의 경우 글자가 깨질 수 있음
- 해결책: csv, xlsx 파일을 pandas(encoding='utf-8-sig')로 인코딩 지정

### 다중 선택 및 오픈 응답 처리
- 문제: 
    - 다중 선택 문항: q3_1_1 ~ q3_1_3 (만족 이유), q9_3_1 ~ q9_3_16 (휴가 활동)
    - 오픈 응답: *_op
- 해결책:
    - 다중 선택 문항: q9_3_1 ~ q9_3_16은 0/1로 코딩된 별도 열로 유지
    - 오픈 응답: q21_op와 같은텍스트 필드는 큰따옴표로 감싸 처리 (예: "도로 소음. 오토바이")
    - 다중 선택 변수 간 관계(예: q3_1_1 ~ q3_1_3은 순위 선택)를 메타데이터에 문서화

### 변수명 및 레이블 보존
- 문제: 코드북은 변수명과 상세 질문 설명을 제공하지만, CSV는 열 헤더로 변수명만 저장하므로 질문 내용
- 해결책:
    - CSV 열 헤더로 간결한 변수명(ex: GU, q1) 사용
    - 변수명, 질문 내용, 값 레이블을 매핑한 별도의 메타데이터 파일(CSV, JSON) 유지
    - CSV 헤더에 너무 긴 설명을 넣지 않아 트렁킹이나 파싱 문제를 방지



### 1. 가중치 데이터와 코드북 매칭
---
- 각 분기별 가중치 액셀(xlsx) 파일에는 설문 응답 데이터와 가중치(wg, ws, WT 등)가 들어 있고,
  코드북 JSON에는 변수명 -> 설문 문항, 선택지 코드, 레이블 정보가 들어 있음
- 매핑 방식:
    - 공통 키: 엑셀과 코드북의 컬럼명(예: q1, GU, DM1)이 동일
    - 엑셀의 값이 숫자 코드이면 → 코드북의 choices를 참조해 레이블 변환
    - 엑셀의 값이 텍스트나 가중치 변수이면 → 그대로 사용
    - 가중치는 분석 시 샘플별로 곱해서 비율/평균 계산에 사용

